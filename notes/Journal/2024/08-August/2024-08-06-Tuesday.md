---
created: 2024-08-06 07:19
tags:
  - DailyNotes
  - MoreTrees
  - Sprint2
---



#  Tuesday, August 06, 2024

<< [[Timestamps/2024/08-August/2024-08-05-Monday|Yesterday]] | [[Timestamps/2024/08-August/2024-08-07-Wednesday|Tomorrow]] >>

---
---
### üìÖ Wake Up
##### üôå One thing I'm excited about right now is...
- Moving onto feature development tickets.

##### üöÄ One thing I plan to accomplish today is...
-  Develop the cache functionality for the migrated user date fixer program.

---
---
# üìù General Notes
---

## Block One (5 hours)
#### What I plan to do
- Work on the migrated user date fixer program.
#### What I accomplished
- Worked on the migrated user date fixer program:
	- Reworked the pre-launch migrated user identification process so that only legacy users within the launch user migration period are selected.
	- Added cache functionality to the program so that a table is used to hold the CockroachDB table IDs that need updating, and a `updated` tracker is present for each table that needs updating.
	- Added batch update functionality so that the identified users can be updated in batches and the cache is updated alongside.
	- Successfully tested the program locally and in UAT.
	- Added comments for auditing purposes.
- Closed the subscription migration CAB
- Created the CAB for running the migrated user date fixer program.
#### Notes
- N/A
---
## Block Two (3 hours)
#### What I plan to do
 - Create ticket for fixing the API keys encrypted using UAT AES Salt and Password.
 - Investigate the difficulty of linking plantations to subscriptions.
#### What I accomplished
- Created the ticket for fixing the API keys encrypted using UAT AES Salt and Password
	- See [here](https://thehut.atlassian.net/browse/IPMORE-822).
- Linking plantations to subscriptions:
	- Problems:
		- Legacy subscriptions allowed you to gift to others with them which isn't a supported feature in the new platform.
		- Not all valid subscriptions are present in the legacy DB subscriptions table.
		- How to tell whether a subscription was one which gifted to others or not?
		- A lot of effort to link all these bits together to find which plantations to which subscriptions.
		- Won't be sure whether this is a valid solution until we get to the end and we can verify if any subscriptions are missing plantations or whatever.
	- Solution:
		- Parse JSON object for plantation
		- Link each stripe subscription to legacy subscription using user_id (need to map account code back to user ID) - 31 missing
		- Check whether they were self-plants or gift-plants
		- If self-plants:
			- Find how many payments were made for that subscription and try to find that many plantations (check for month gap between plants and same quantity)
			- Risk - Might not be able to find the correct number of plantations.
			- Link plantation to subscription ID (somehow?)
		- If gift-plants:
			- Find who they were gifted to and the plantation quantity distribution to the recipients.
			- One payment may go to 5 plantations per month if 5 recipients.
			- Risk - Might not be able to find the correct number of plantations.
			- Link plantation to subscription ID (somehow?)
		- 
#### Notes
- N/A

---
---
### üìÖ Wind Down
##### üôå What did I achieve today
- 

##### üöÄ How did I struggle today
* 

---
---
### Notes created today
```dataview
List FROM "" WHERE file.cday = date("2024-08-06") SORT file.ctime asc
```

### Notes last touched today
```dataview
List FROM "" WHERE file.mday = date("2024-08-06") SORT file.mtime asc
```